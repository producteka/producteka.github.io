angular.module("app").factory("fieldbookService",["configurationService","$http",function(r,n){var o=r.fieldbookService,e=function(r){url=o.locationsUrl+"zonas",n({url:url}).then(function(n){r(n.data)},function(r){$log.error("error loading products",r)})},i={},a=!1,u=!1,t=!1,c=!1,l=function(){return!1!==a&&!1!==u&&!1!==t&&!1!==c},s=function(r,o){url=r.url+"productos",n({url:url}).then(function(r){o(r.data)},function(r){$log.error("error loading products",r)})},g=function(r,o){url=r.url+"clientes",n({url:url}).then(function(r){o(r.data)},function(r){$log.error("error loading clients",r)})},f={};return f.getHours=function(r,o){url=r.url+"horarios",n({url:url}).then(function(r){o(r.data)},function(r){$log.error("error loading hours",r)})},f.getRegions=function(r){e(function(n){r(n)})},f.getAllData=function(r,n){e(function(o){for(reg in o)if(o[reg].nombre===r.nombre){if(null!=o[reg].sugerenciasrelacionadas){var e=o[reg].sugerenciasrelacionadas.split(";");for(sugerencia in e){e[sugerencia]=e[sugerencia].split(",");for(relacionada in e[sugerencia])e[sugerencia][relacionada]=e[sugerencia][relacionada].trim()}i.suggestionsRelated=e}if(null!=o[reg].productosrelacionados){var a=o[reg].productosrelacionados.split(";");for(sugerencia in a){a[sugerencia]=a[sugerencia].split(",");for(relacionada in a[sugerencia])a[sugerencia][relacionada]=a[sugerencia][relacionada].trim().toLowerCase()}i.productsRelated=a}}c=!0,l()&&n(i)}),s(r,function(r){i.allProducts=r,a=!0,l()&&n(i)}),g(r,function(r){i.allClients=r,u=!0,l()&&n(i)}),f.getHours(r,function(r){i.allHours=r,t=!0,l()&&n(i)})},f}]);
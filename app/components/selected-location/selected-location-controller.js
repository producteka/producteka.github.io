angular.module("app").controller("selectedLocationController",["$scope","$http","$stateParams","configurationService","fieldbookService","searchBarService","$state",function(e,o,a,t,n,s,r){e.location=a.ubicacion,e.locationInfo,e.fieldBookData={},e.isMobile=window.innerWidth<=600||window.innerHeight<=500,e.loadComplete=!1,e.clientsShown,e.noResults,e.showProducts=!1,e.showStores=!1,e.callPerformed=function(o){_trackEvent("Llamadas",o,e.searchText)},e.locationConsulted=function(o){_trackEvent("Ubicaciones",o,e.searchText)},e.logoPressed=function(){document.getElementById("searchterm").focus()},e.search=function(o,a){window.scrollTo(0,0),document.getElementById("searchterm").blur(),e.clientsShown=s.getMatches(e.fieldBookData,o,a),e.noResults=s.noResults(e.clientsShown),e.searchText=o;var n=document.getElementById("searchBox");document.getElementById("searchterm").value=o,n.style.display="flex",n.className="nav-down",e.noResults?("web"===t.general.appType?ga("send","pageview","search?searchText="+o.toLowerCase()+" (Not Found)"):"mobile"===t.general.appType&&ga_storage._trackPageview("mobileSearch?searchText="+o.toLowerCase()+" (Not Found)","No Results Mobile Search"),r.go("selectedLocation.sinResultados")):("web"===t.general.appType?ga("send","pageview","search?searchText="+o.toLowerCase()):"mobile"===t.general.appType&&ga_storage._trackPageview("mobileSearch?searchText="+o.toLowerCase(),"Mobile Search"),r.go("selectedLocation.resultados")),"mobile"===t.general.appType&&ga_storage._trackEvent("Busquedas",e.noResults?"Sin resultados":"Exitosas",o.toLowerCase())},function(){var o=function(o){e.locationInfo=o,null!=o.sugerencias&&(o.sugerencias=o.sugerencias.split(","))};n.getRegions(function(a){for(reg in a)a[reg].nombre===e.location&&(o(a[reg]),n.getAllData(a[reg],function(o){e.fieldBookData=o,e.loadComplete=!0}))})}()}]);